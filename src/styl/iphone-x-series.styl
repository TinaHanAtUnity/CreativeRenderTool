@import "vars.styl";

$iphone-x-overlay-styles() {
  @media (orientation: portrait) {
    &.show-gdpr-banner .bottom-container .center .gdpr-pop-up {
      border-radius: $video-overlay-styles.tab-border-radius;
    }
  }

  @media (orientation: landscape) {
    &.show-gdpr-banner .bottom-container .center .gdpr-pop-up {
      width: 40%;

      .gdpr-text {
        font-size: $video-overlay-styles.base-size * .29;
      }
    }

    .bottom-container {
      .center,
      .tab {
        bottom: 0;
      }

      .gdpr-button .tab {
        bottom: $video-overlay-styles.base-size * .28;
      }
    }
  }

  .bottom-container {
    margin-bottom: constant(safe-area-inset-bottom);
    margin-bottom: env(safe-area-inset-bottom); // @stylint ignore;
  }

  .top-container {
    margin-top: calc(constant(safe-area-inset-top));
    margin-top: calc(env(safe-area-inset-top)); // @stylint ignore;
  }

  .button-left .tab {
    padding-left: constant(safe-area-inset-left);
    padding-left: env(safe-area-inset-left); // @stylint ignore;
  }

  .button-left {
    width: "calc(constant(safe-area-inset-left) + %s)" % $video-overlay-styles.touchable-area-width;
    width: "calc(env(safe-area-inset-left) + %s)" % $video-overlay-styles.touchable-area-width; // @stylint ignore;
  }

  .button-right .tab {
    padding-right: constant(safe-area-inset-right);
    padding-right: env(safe-area-inset-right); // @stylint ignore;
  }

  .button-right {
    width: "calc(constant(safe-area-inset-right) + %s)" % $video-overlay-styles.touchable-area-width;
    width: "calc(env(safe-area-inset-right) + %s)" % $video-overlay-styles.touchable-area-width; // @stylint ignore;
  }


  .call-button {
    width: "calc(constant(safe-area-inset-right) + %s)" % $video-overlay-styles.call-button-width;
    width: "calc(env(safe-area-inset-right) + %s)" % $video-overlay-styles.call-button-width; // @stylint ignore;
  }

  .gdpr-button {
    left: "calc(%s + constant(safe-area-inset-left))" % $video-overlay-styles.touchable-area-width;
    left: "calc(%s + env(safe-area-inset-left))" % $video-overlay-styles.touchable-area-width; // @stylint ignore;
  }
}

.ar-phone-x-top {
  display: none;
}

.ar-phone-x-bottom {
  display: none;
}

.ar-phone-x-left {
  display: none;
}

.ar-phone-x-right {
  display: none;
}

$privacy-button-iphone-x-top() {
  .privacy-button {
    top: constant(safe-area-inset-top);
    left: constant(safe-area-inset-left);

    top: env(safe-area-inset-top);
    left: env(safe-area-inset-left);
  }
}

$privacy-button-iphone-x-bottom() {
  .privacy-button {
    bottom: constant(safe-area-inset-bottom);
    left: constant(safe-area-inset-left);

    bottom: env(safe-area-inset-bottom);
    left: env(safe-area-inset-left);
  }
}

$iphone-x-gdpr-pop-up-top() {
  .gdpr-pop-up {
    top: constant(safe-area-inset-top);
    left: constant(safe-area-inset-left);
    width: calc(100vw - constant(safe-area-inset-left) - constant(safe-area-inset-right));

    top: env(safe-area-inset-top);
    left: env(safe-area-inset-left);
    width: calc(100vw - env(safe-area-inset-left) - env(safe-area-inset-right));
  }
}

$iphone-x-gdpr-pop-up-bottom() {
  .gdpr-pop-up {
    bottom: constant(safe-area-inset-bottom);
    left: constant(safe-area-inset-left);
    width: calc(100vw - constant(safe-area-inset-left) - constant(safe-area-inset-right));

    bottom: env(safe-area-inset-bottom);
    left: env(safe-area-inset-left);
    width: calc(100vw - env(safe-area-inset-left) - env(safe-area-inset-right));
  }
}

$iphone-x-mraid-styles() {
    #mraid-iframe {
      padding-top: constant(safe-area-inset-top);
      padding-right: constant(safe-area-inset-right);
      padding-bottom: constant(safe-area-inset-bottom);
      padding-left: constant(safe-area-inset-left);
      width: calc(100vw - constant(safe-area-inset-left) - constant(safe-area-inset-right));
      height: calc(100vh - constant(safe-area-inset-top) - constant(safe-area-inset-bottom));

      padding-top: env(safe-area-inset-top);
      padding-right: env(safe-area-inset-right);
      padding-bottom: env(safe-area-inset-bottom);
      padding-left: env(safe-area-inset-left);
      width: calc(100vw - env(safe-area-inset-left) - env(safe-area-inset-right));
      height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
    }

    .ar-phone-x-top {
      position: fixed;
      top: 0;
      left: 0;
      display: block;
      width: 100%;
      background: $black;

      height: env(safe-area-inset-top);

      height: constant(safe-area-inset-top);
    }

    .ar-phone-x-bottom {
      position: fixed;
      bottom: 0;
      left: 0;
      display: block;
      width: 100%;
      background: $black;

      height: env(safe-area-inset-bottom);

      height: constant(safe-area-inset-bottom);
    }

    .ar-phone-x-left {
      position: fixed;
      top: 0;
      left: 0;
      display: block;
      height: 100%;
      background: $black;

      width: env(safe-area-inset-left);

      width: constant(safe-area-inset-left);
    }

    .ar-phone-x-right {
      position: fixed;
      top: 0;
      right: 0;
      display: block;
      height: 100%;
      background: $black;

      width: env(safe-area-inset-right);

      width: constant(safe-area-inset-right);
    }

    .close-region {
      top: constant(safe-area-inset-top);
      right: constant(safe-area-inset-right);

      top: env(safe-area-inset-top);
      right: env(safe-area-inset-right);
    }

    .camera-permission-panel {
      .gdpr-link {
        bottom: calc(.5rem + constant(safe-area-inset-bottom));

        bottom: calc(.5rem + env(safe-area-inset-bottom));
      }
      .show-learn-more-button {
        bottom: calc(-.5rem + constant(safe-area-inset-bottom));

        bottom: calc(-.5rem + env(safe-area-inset-bottom));
      }
    }
}

$iphone-x-styles() {

  #gdpr-consent-settings {
    .safe-area-content {
      padding-top: constant(safe-area-inset-top);
      padding-right: constant(safe-area-inset-right);
      padding-bottom: constant(safe-area-inset-bottom);
      padding-left: constant(safe-area-inset-left);

      padding-top: env(safe-area-inset-top);
      padding-right: env(safe-area-inset-right);
      padding-bottom: env(safe-area-inset-bottom);
      padding-left: env(safe-area-inset-left);
    }
  }

  #promo {

    .privacy-button {
      padding-top: constant(safe-area-inset-top);
      padding-left: constant(safe-area-inset-left);

      padding-top: env(safe-area-inset-top);
      padding-left: env(safe-area-inset-left);
    }

    .gdpr-pop-up {
      bottom: constant(safe-area-inset-bottom);
      left: constant(safe-area-inset-left);
      width: calc(100vw - constant(safe-area-inset-left) - constant(safe-area-inset-right));


      bottom: env(safe-area-inset-bottom);
      left: env(safe-area-inset-left);
      width: calc(100vw - env(safe-area-inset-left) - env(safe-area-inset-right));
    }
  }

  #webplayer-mraid {
    $iphone-x-mraid-styles();
    $privacy-button-iphone-x-top();
    $iphone-x-gdpr-pop-up-top();
  }

  #extended-mraid, #mraid {
    $iphone-x-mraid-styles();
    $privacy-button-iphone-x-bottom();
    $iphone-x-gdpr-pop-up-bottom();
  }

  .landscape {
    #extended-mraid {

      .gdpr-pop-up {
        &.mraid-container {
          top: inherit;
          bottom: 0;
          width: calc(50vw - env(safe-area-inset-left));
        }
      }

      .camera-permission-panel {
        .show-learn-more-button {
          right: constant(safe-area-inset-right);

          right: env(safe-area-inset-right);
        }
      }
    }
  }

  #admob {
    #admob-iframe {
      padding-top: constant(safe-area-inset-top);
      padding-right: constant(safe-area-inset-right);
      padding-bottom: constant(safe-area-inset-bottom);
      padding-left: constant(safe-area-inset-left);
      width: calc(100vw - constant(safe-area-inset-left) - constant(safe-area-inset-right));
      height: calc(100vh - constant(safe-area-inset-top) - constant(safe-area-inset-bottom));

      padding-top: env(safe-area-inset-top);
      padding-right: env(safe-area-inset-right);
      padding-bottom: env(safe-area-inset-bottom);
      padding-left: env(safe-area-inset-left);
      width: calc(100vw - env(safe-area-inset-left) - env(safe-area-inset-right));
      height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
    }

    .privacy-button {
      padding-right: constant(safe-area-inset-right);
      padding-bottom: constant(safe-area-inset-bottom);

      padding-right: env(safe-area-inset-right);
      padding-bottom: env(safe-area-inset-bottom);
    }

    .gdpr-pop-up {
      bottom: constant(safe-area-inset-bottom);
      left: constant(safe-area-inset-left);
      width: calc(100vw - constant(safe-area-inset-left) - constant(safe-area-inset-right));


      bottom: env(safe-area-inset-bottom);
      left: env(safe-area-inset-left);
      width: calc(100vw - env(safe-area-inset-left) - env(safe-area-inset-right));
    }
  }

  #end-screen,
  #vast-end-screen {
    padding-top: constant(safe-area-inset-top);
    padding-right: constant(safe-area-inset-right);
    padding-bottom: constant(safe-area-inset-bottom);
    padding-left: constant(safe-area-inset-left);
    width: calc(100% - constant(safe-area-inset-left) - constant(safe-area-inset-right));
    height: calc(100% - constant(safe-area-inset-top) - constant(safe-area-inset-bottom));

    padding-top: env(safe-area-inset-top);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    width: calc(100% - env(safe-area-inset-left) - env(safe-area-inset-right));
    height: calc(100% - env(safe-area-inset-top) - env(safe-area-inset-bottom));

    .btn-close-region {
      top: constant(safe-area-inset-top);
      right: constant(safe-area-inset-right);

      top: env(safe-area-inset-top);
      right: env(safe-area-inset-right);
    }

    .btn-close-region-bottom {
      bottom: constant(safe-area-inset-bottom);
      right: constant(safe-area-inset-right); //@stylint ignore;

      bottom: env(safe-area-inset-bottom);
      right: env(safe-area-inset-right); //@stylint ignore;
    }
  }

  #vast-end-screen {
    .china-advertisement {
      top: constant(safe-area-inset-top);
      left: constant(safe-area-inset-left);

      top: env(safe-area-inset-top);
      left: env(safe-area-inset-left);
    }

    .privacy-button {
      bottom: constant(safe-area-inset-bottom);
      left: constant(safe-area-inset-left);

      bottom: env(safe-area-inset-bottom);
      left: env(safe-area-inset-left);
    }
  }

  #display-interstitial,
  #closable-video-overlay {
    .close-region {
      top: constant(safe-area-inset-top);
      right: constant(safe-area-inset-right);

      top: env(safe-area-inset-top);
      right: env(safe-area-inset-right);
    }
  }

  #overlay,
  #closable-video-overlay {
    position: absolute;
    top: constant(safe-area-inset-top);
    left: constant(safe-area-inset-left);
    width: calc(100% - constant(safe-area-inset-left) - constant(safe-area-inset-right));
    height: calc(100% - constant(safe-area-inset-top) - constant(safe-area-inset-bottom));

    top: env(safe-area-inset-top);
    left: env(safe-area-inset-left);
    width: calc(100% - env(safe-area-inset-left) - env(safe-area-inset-right));
    height: calc(100% - env(safe-area-inset-top) - env(safe-area-inset-bottom));

    .skip-hit-area {
      top: constant(safe-area-inset-top);
      left: constant(safe-area-inset-left);

      top: env(safe-area-inset-top);
      left: env(safe-area-inset-left);
    }

    .progress {
      top: constant(safe-area-inset-top);
      right: constant(safe-area-inset-right);

      top: env(safe-area-inset-top);
      right: env(safe-area-inset-right);
    }

    .mute-button {
      bottom: constant(safe-area-inset-bottom);
      left: constant(safe-area-inset-left);

      bottom: env(safe-area-inset-bottom);
      left: env(safe-area-inset-left);
    }

    .call-button {
      right: constant(safe-area-inset-right);
      bottom: constant(safe-area-inset-bottom);

      right: env(safe-area-inset-right);
      bottom: env(safe-area-inset-bottom);
    }
  }

  .slide-up {
    slide-animation(.4s, ease-in, -250%);
  }

  .slide-down {
    slide-animation(.4s, ease-in, 250%);
  }

  #privacy {
    top: constant(safe-area-inset-top);
    left: constant(safe-area-inset-left);

    top: env(safe-area-inset-top);
    left: env(safe-area-inset-left);

    width: calc(100% - constant(safe-area-inset-left) - constant(safe-area-inset-right));
    height: calc(100% - constant(safe-area-inset-top) - constant(safe-area-inset-bottom));

    width: calc(100% - env(safe-area-inset-left) - env(safe-area-inset-right));
    height: calc(100% - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  }

  #privacy-sdk-container {
    #privacy-iframe {
      padding-top: constant(safe-area-inset-top);
      padding-bottom: constant(safe-area-inset-bottom);
      height: calc(100vh - constant(safe-area-inset-top) - constant(safe-area-inset-bottom));

      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
      height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
    }
  }
}

$iphone-x-performance-end-screen-styles() {
  .performance-end-screen {
    .portrait #end-screen {
      padding: 0;
      padding-top: env(safe-area-inset-top);
      padding-top: constant(safe-area-inset-top); // @stylint ignore;
      width: 100vw;
      height: calc(100vh - env(safe-area-inset-top));
      height: calc(100vh - constant(safe-area-inset-top)); // @stylint ignore;

      .bottom-container {
        margin-bottom: env(safe-area-inset-bottom);
        margin-bottom: constant(safe-area-inset-bottom); // @stylint ignore;
      }
    }

    .landscape #end-screen {
      padding: 0;
      height: 100vh;

      .china-advertisement {
        right: auto;
        left: 0;
        margin-right: 0;
        margin-left: 1em;
      }
      .bottom-container {
        margin-bottom: constant(safe-area-inset-bottom);
        margin-bottom: env(safe-area-inset-bottom); // @stylint ignore

        .privacy-button {
          right: 0;
          left: auto;
          margin-right: 1em;
          margin-left: 0;
        }
      }

      &.show-gdpr-banner .gdpr-pop-up {
        padding-bottom: constant(safe-area-inset-bottom);
        padding-bottom: env(safe-area-inset-bottom); // @stylint ignore

        .gdpr-text {
          padding-bottom: 0;
        }
      }
    }

    .ios-landscape-right #end-screen {
      padding-right: env(safe-area-inset-right);
      padding-right: constant(safe-area-inset-right); // @stylint ignore
      width: calc(100vw - env(safe-area-inset-right));
      width: calc(100vw - constant(safe-area-inset-right)); // @stylint ignore
    }

    .ios-landscape-left #end-screen {
      padding-left: env(safe-area-inset-left);
      padding-left: constant(safe-area-inset-left); // @stylint ignore
      width: calc(100vw - env(safe-area-inset-left));
      width: calc(100vw - constant(safe-area-inset-left)); // @stylint ignore

      .bottom-container .privacy-button {
        right: env(safe-area-inset-right);
        right: constant(safe-area-inset-right);   // @stylint ignore
      }
    }

    #privacy {
      height: calc(100% - constant(safe-area-inset-top));
      height: calc(100% - env(safe-area-inset-top)); // @stylint ignore

      .pop-up {
        margin: 5% auto 5% auto;
      }
    }

    .landscape  #privacy {
      height: 100%;
    }

    .ios-landscape-right #privacy {
      left: 0;
      width: calc(100% - env(safe-area-inset-left));
    }

    .ios-landscape-left #privacy {
      width: calc(100% - env(safe-area-inset-right));
    }

    #end-screen .end-screen-info-background{
      @media (orientation: portrait) {
        /* iPhone X & iPhone XS */
        @media only screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) {
          font-size: $default-px-size * 1.5;
        }
      }
    }
  }
}

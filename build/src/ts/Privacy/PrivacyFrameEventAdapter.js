var IFrameEvents;
(function (IFrameEvents) {
    IFrameEvents["PRIVACY_READY"] = "onPrivacyReady";
    IFrameEvents["PRIVACY_COMPLETED"] = "onPrivacyCompleted";
    IFrameEvents["PRIVACY_OPENURL"] = "onPrivacyOpenUrl";
    IFrameEvents["PRIVACY_METRIC"] = "onPrivacyMetric";
    IFrameEvents["PRIVACY_FETCHURL"] = "onPrivacyFetchUrl";
})(IFrameEvents || (IFrameEvents = {}));
export class PrivacyFrameEventAdapter {
    constructor(core, handler, iframe) {
        this._handler = handler;
        this._core = core;
        this._iFrame = iframe;
        this._messageListener = (e) => this.onMessage(e);
        this._iFrameHandlers = {};
        this._iFrameHandlers[IFrameEvents.PRIVACY_COMPLETED] = (msg) => this.onPrivacyCompleted(msg.data);
        this._iFrameHandlers[IFrameEvents.PRIVACY_READY] = () => this.onPrivacyReady();
        this._iFrameHandlers[IFrameEvents.PRIVACY_OPENURL] = (msg) => this.onPrivacyOpenUrl(msg.data);
        this._iFrameHandlers[IFrameEvents.PRIVACY_METRIC] = (msg) => this.onPrivacyMetric(msg.data);
        this._iFrameHandlers[IFrameEvents.PRIVACY_FETCHURL] = (msg) => this.onPrivacyFetchUrl(msg.data);
    }
    connect() {
        window.addEventListener('message', this._messageListener, false);
    }
    disconnect() {
        window.removeEventListener('message', this._messageListener);
    }
    onMessage(e) {
        const message = e.data;
        if (message.type in this._iFrameHandlers) {
            const handler = this._iFrameHandlers[message.type];
            handler(message);
        }
    }
    postMessage(event, data) {
        if (this._iFrame.contentWindow) {
            this._iFrame.contentWindow.postMessage({
                type: event,
                data: data
            }, '*');
        }
    }
    onPrivacyCompleted(params) {
        this._handler.onPrivacyCompleted(params);
    }
    onPrivacyReady() {
        this._handler.onPrivacyReady();
    }
    onPrivacyOpenUrl(url) {
        this._handler.onPrivacyOpenUrl(url);
    }
    onPrivacyMetric(data) {
        this._handler.onPrivacyMetric(data);
    }
    onPrivacyFetchUrl(data) {
        this._handler.onPrivacyFetchUrl(data);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJpdmFjeUZyYW1lRXZlbnRBZGFwdGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL3RzL1ByaXZhY3kvUHJpdmFjeUZyYW1lRXZlbnRBZGFwdGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLElBQUssWUFNSjtBQU5ELFdBQUssWUFBWTtJQUNiLGdEQUFnQyxDQUFBO0lBQ2hDLHdEQUF3QyxDQUFBO0lBQ3hDLG9EQUFvQyxDQUFBO0lBQ3BDLGtEQUFrQyxDQUFBO0lBQ2xDLHNEQUFzQyxDQUFBO0FBQzFDLENBQUMsRUFOSSxZQUFZLEtBQVosWUFBWSxRQU1oQjtBQWVELE1BQU0sT0FBTyx3QkFBd0I7SUFPakMsWUFBWSxJQUFjLEVBQUUsT0FBNkIsRUFBRSxNQUF5QjtRQUNoRixJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQztRQUN4QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNsQixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUV0QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQyxDQUFRLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQWUsQ0FBQyxDQUFDLENBQUM7UUFFdEUsSUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7UUFDMUIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUEwQixHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0gsSUFBSSxDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQy9FLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQVMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RHLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUE2QixHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDeEgsSUFBSSxDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUF5QixHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDNUgsQ0FBQztJQUVNLE9BQU87UUFDVixNQUFNLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRU0sVUFBVTtRQUNiLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDakUsQ0FBQztJQUVPLFNBQVMsQ0FBQyxDQUFlO1FBQzdCLE1BQU0sT0FBTyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFDdkIsSUFBSSxPQUFPLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxlQUFlLEVBQUU7WUFDdEMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbkQsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQ3BCO0lBQ0wsQ0FBQztJQUVNLFdBQVcsQ0FBQyxLQUFhLEVBQUUsSUFBYztRQUM1QyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFO1lBQzVCLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQztnQkFDbkMsSUFBSSxFQUFFLEtBQUs7Z0JBQ1gsSUFBSSxFQUFFLElBQUk7YUFDYixFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQ1g7SUFDTCxDQUFDO0lBRU8sa0JBQWtCLENBQUMsTUFBK0I7UUFDdEQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QyxDQUFDO0lBRU8sY0FBYztRQUNsQixJQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ25DLENBQUM7SUFFTyxnQkFBZ0IsQ0FBQyxHQUFXO1FBQ2hDLElBQUksQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVPLGVBQWUsQ0FBQyxJQUFnQztRQUNwRCxJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBRU8saUJBQWlCLENBQUMsSUFBNEI7UUFDbEQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMxQyxDQUFDO0NBQ0oifQ==